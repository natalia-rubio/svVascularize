<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>svVascularize API Reference</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" />
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="style_api.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Shared top navigation -->
    <header class="topnav">
        <div class="container">
            <h1>svVascularize</h1>
            <nav>
                <a href="../index.html#about">About</a>
                <a href="../install.html">Installation</a>
                <a href="../doc.html">Documentation</a>
                <a href="#simulation">Simulation</a>
                <a href="https://pypi.org/project/svv/" target="_blank" rel="noopener">PyPI</a>
                <a href="https://github.com/SimVascular/svVascularize" target="_blank" rel="noopener">GitHub</a>
            </nav>
        </div>
    </header>

    <!-- Hero section for API Reference -->
    <section class="hero api-hero">
        <div class="container">
            <h2>svVascularize API</h2>
            <p>Complete reference for the <code>svv</code> module - classes, functions, and parameters</p>
            <div class="api-version-info">
                <span class="api-version-badge">v1.0.0</span>
                <span class="api-version-badge stable">stable</span>
            </div>
        </div>
    </section>

    <!-- Breadcrumbs -->
    <div class="container">
        <nav class="api-breadcrumbs">
            <a href="../doc.html">Documentation</a>
            <span class="separator">/</span>
            <span>API Reference</span>
        </nav>
    </div>

    <!-- Main API Documentation -->
    <div class="container api-container">
        <!-- Search Bar -->
        <div class="api-search-container">
            <i class="fas fa-search api-search-icon"></i>
            <input type="text" class="api-search-input" placeholder="Search modules, classes, functions...">
        </div>

        <!-- Quick Navigation Cards -->
        <div class="api-quick-nav">
            <div class="api-nav-card">
                <i class="fas fa-rocket"></i>
                <h3>Quick Start</h3>
                <p>Import and basic usage</p>
                <a href="../quickstart.html">Get Started →</a>
            </div>
            <div class="api-nav-card">
                <i class="fas fa-cube"></i>
                <h3>Core Modules</h3>
                <p>Domain, Tree, Forest</p>
                <a href="#modules">Browse Modules →</a>
            </div>
            <div class="api-nav-card">
                <i class="fas fa-code"></i>
                <h3>Examples</h3>
                <p>Code snippets and patterns</p>
                <a href="#examples">View Examples →</a>
            </div>
        </div>

        <!-- Quick Start Section
        <section id="quickstart" class="api-section">
            <h2>Quick Start</h2>
            <div class="callout tip">
                <strong>Installation:</strong> Install svVascularize via pip: <code>pip install svv</code>
            </div>

            <h3>Basic Import</h3>
            <pre data-copy><code class="language-python">import svv
from svv.domain import Domain
from svv.forest import Forest
from svv.tree import Tree
from svv.simulation import Simulation

# Create a domain
domain = Domain()

# Generate a vascular tree
tree = Tree(domain)
tree.generate()

# Run simulation
sim = Simulation(tree)
results = sim.run()</code></pre>
        </section> -->

        <!-- Module Documentation Grid -->
        <section id="modules" class="api-section">
            <h2>Module Reference</h2>

            <div class="api-grid">
                <!-- Sidebar Navigation -->
                <aside class="api-sidebar">
                    <div class="sidebar-section">
                        <h4 class="sidebar-title">Modules</h4>
                        <nav class="api-sidebar-nav">
                            <ul>
                                <li><a href="#module-domain" class="active"><i class="fas fa-cube"></i> svv.domain</a></li>
                                <li><a href="#module-forest"><i class="fas fa-tree"></i> svv.forest</a></li>
                                <li><a href="#module-tree"><i class="fas fa-code-branch"></i> svv.tree</a></li>
                                <li><a href="#module-simulation"><i class="fas fa-flask"></i> svv.simulation</a></li>
                                <li><a href="#module-utils"><i class="fas fa-tools"></i> svv.utils</a></li>
                                <li><a href="#module-visualize"><i class="fas fa-eye"></i> svv.visualize</a></li>
                            </ul>
                        </nav>
                    </div>
                </aside>

                <!-- Main Content Area -->
                <main class="api-main-content">
                    <!-- Domain Module -->
                    <article id="module-domain" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.domain</code></h3>
                            <span class="api-module-badge">Core Module</span>
                        </header>

                        <p class="api-module-description">
                            Core domain functionality for defining computational domains and geometric operations.
                            Provides matrix operations, I/O capabilities, and solver implementations.
                        </p>

                        <div class="api-submodules">
                            <h4>Submodules</h4>
                            <table class="api-table">
                                <thead>
                                    <tr>
                                        <th>Submodule</th>
                                        <th>Description</th>
                                        <th>Key Components</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>domain.core</code></td>
                                        <td>Core matrix operations</td>
                                        <td>AMatrix, HMatrix, MMatrix, NMatrix</td>
                                    </tr>
                                    <tr>
                                        <td><code>domain.io</code></td>
                                        <td>Input/output operations</td>
                                        <td>read(), write(), export()</td>
                                    </tr>
                                    <tr>
                                        <td><code>domain.kernel</code></td>
                                        <td>Kernel functions and coordinate systems</td>
                                        <td>CoordinateSystem, Cost, Kernel</td>
                                    </tr>
                                    <tr>
                                        <td><code>domain.routines</code></td>
                                        <td>Computational routines</td>
                                        <td>allocate(), discretize(), tetrahedralize()</td>
                                    </tr>
                                    <tr>
                                        <td><code>domain.solver</code></td>
                                        <td>Domain-specific solvers</td>
                                        <td>Solver class</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="api-classes">
                            <h4>Main Classes</h4>
                            <ul class="api-class-list">
                                <li>
                                    <a href="domain.html"><code>Domain</code></a> - Main domain class for defining spatial regions
                                </li>
                                <li>
                                    <a href="patch.html"><code>Patch</code></a> - Individual patches for RBF interpolation
                                </li>
                            </ul>
                        </div>
                        <div class="api-example">
                            <h4>Example Usage</h4>
                            <pre data-copy><code class="language-python">from svv.domain import Domain

# Create a domain from a mesh
import pyvista as pv
mesh = pv.read('tissue_geometry.stl')
domain = Domain(mesh)

# Build implicit function
domain.create()
domain.solve()
domain.build()

# Export domain
boundary, _ = domain.get_boundary(resolution=30)</code></pre>
                        </div>

                        <div class="admonition note">
                            <p><strong>Performance Note:</strong> The domain.routines module includes Cython-optimized functions (<code>c_allocate.pyx</code>, <code>c_sample.pyx</code>) for enhanced performance.</p>
                        </div>
                    </article>

                    <!-- Forest Module -->
                    <article id="module-forest" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.forest</code></h3>
                            <span class="api-module-badge">Core Module</span>
                        </header>

                        <p class="api-module-description">
                            Forest structures for managing collections of vascular trees and their interconnections.
                            Supports various connection algorithms and export formats.
                        </p>

                        <div class="api-submodules">
                            <h4>Connection Methods</h4>
                            <table class="api-table">
                                <thead>
                                    <tr>
                                        <th>Class</th>
                                        <th>Description</th>
                                        <th>Use Case</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>BezierConnection</code></td>
                                        <td>Bezier curve connections</td>
                                        <td>Smooth, controllable curves</td>
                                    </tr>
                                    <tr>
                                        <td><code>CatmullRomConnection</code></td>
                                        <td>Catmull-Rom spline connections</td>
                                        <td>Interpolating through points</td>
                                    </tr>
                                    <tr>
                                        <td><code>GeodesicConnection</code></td>
                                        <td>Geodesic path connections</td>
                                        <td>Shortest path on surfaces</td>
                                    </tr>
                                    <tr>
                                        <td><code>NURBSConnection</code></td>
                                        <td>NURBS curve connections</td>
                                        <td>Precise geometric control</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="api-example">
                            <h4>Example Usage</h4>
                            <pre data-copy><code class="language-python">from svv.forest import Forest
from svv.forest.connect import BezierConnection

# Create a forest and add trees
forest = Forest()
forest.add_tree(tree1)
forest.add_tree(tree2)

# Connect trees using Bezier curves
connection = BezierConnection(control_points=4)
forest.connect_trees(tree1, tree2, method=connection)

# Export the forest
from svv.forest.export import export_solid
export_solid(forest, 'forest_model.stl')</code></pre>
                        </div>
                    </article>

                    <!-- Tree Module -->
                    <article id="module-tree" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.tree</code></h3>
                            <span class="api-module-badge">Core Module</span>
                        </header>

                        <p class="api-module-description">
                            Tree structures and algorithms for vascular tree generation, manipulation, and analysis.
                            Includes branching logic, collision detection, and optimization utilities.
                        </p>

                        <div class="api-submodules">
                            <h4>Key Classes</h4>
                            <table class="api-table">
                                <thead>
                                    <tr>
                                        <th>Class</th>
                                        <th>Module</th>
                                        <th>Purpose</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>Tree</code></td>
                                        <td>tree</td>
                                        <td>Main tree structure</td>
                                    </tr>
                                    <tr>
                                        <td><code>Bifurcation</code></td>
                                        <td>tree.branch</td>
                                        <td>Bifurcation point management</td>
                                    </tr>
                                    <tr>
                                        <td><code>TreeManager</code></td>
                                        <td>tree.utils</td>
                                        <td>Tree lifecycle management</td>
                                    </tr>
                                    <tr>
                                        <td><code>TreeCollision</code></td>
                                        <td>tree.collision</td>
                                        <td>Collision detection</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="api-classes">
                            <h4>Main Classes</h4>
                            <ul class="api-class-list">
                                <li>
                                    <a href="tree.html"><code>Tree</code></a> - Main class for building bifurcating vascular structures
                                </li>
                            </ul>
                        </div>
                        <div class="admonition note">
                            <p><strong>Performance note:</strong> The tree.utils module contains several Cython-optimized functions (<code>c_angle</code>, <code>c_basis</code>, <code>c_close</code>, <code>c_extend</code>, <code>c_local_optimize</code>, <code>c_obb</code>, <code>c_update</code>) for performance-critical operations.</p>
                        </div>
                    </article>


                    <!-- Simulation Module -->
                    <article id="module-simulation" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.simulation</code></h3>
                            <span class="api-module-badge">Simulation</span>
                        </header>

                        <p class="api-module-description">
                            Comprehensive simulation framework for fluid dynamics and hemodynamic modeling.
                            Supports both 0D and 1D reduced-order models.
                        </p>

                        <div class="api-submodules">
                            <h4>Simulation Types</h4>
                            <div class="api-cards">
                                <div class="api-card">
                                    <h5>0D Models</h5>
                                    <p>Lumped parameter models for rapid system-level analysis</p>
                                    <ul>
                                        <li><code>zerod_forest</code></li>
                                        <li><code>zerod_tree</code></li>
                                        <li><code>project_solution</code></li>
                                    </ul>
                                </div>
                                <div class="api-card">
                                    <h5>1D Models</h5>
                                    <p>One-dimensional flow models for detailed hemodynamics</p>
                                    <ul>
                                        <li><code>centerlines</code></li>
                                        <li><code>generate_1d_mesh</code></li>
                                        <li><code>parameters</code></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="api-example">
                            <h4>Example Usage</h4>
                            <pre data-copy><code class="language-python">from svv.simulation import Simulation
from svv.simulation.boundary_conditions import FlowBC, PressureBC
from svv.simulation.fluid.rom.zero_d import zerod_tree

# Set up simulation
sim = Simulation(tree, dimension='0D')

# Configure boundary conditions
sim.add_boundary_condition('inlet', FlowBC(flow_rate=5.0))
sim.add_boundary_condition('outlet', PressureBC(pressure=80.0))

# Set fluid properties
sim.set_parameters(
    viscosity=0.004,  # Pa·s
    density=1060      # kg/m³
)

# Run simulation
results = sim.run(time_steps=1000, dt=0.001)

# Analyze results
print(f"Mean pressure: {results.pressure.mean():.2f} mmHg")
print(f"Mean flow: {results.flow.mean():.2f} mL/s")</code></pre>
                        </div>
                    </article>

                    <!-- Utils Module -->
                    <article id="module-utils" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.utils</code></h3>
                            <span class="api-module-badge">Utilities</span>
                        </header>

                        <p class="api-module-description">
                            Utility functions for mesh operations, spatial calculations, and cross-platform support.
                        </p>

                        <div class="callout warning">
                            <strong>Platform Support:</strong> The remeshing module includes platform-specific MMG binaries for Linux, macOS, and Windows. Ensure you have the correct binary for your system.
                        </div>

                        <div class="api-submodules">
                            <h4>Available Utilities</h4>
                            <ul>
                                <li><code>remeshing.remesh()</code> - Adaptive mesh refinement using MMG</li>
                                <li><code>spatial.c_distance()</code> - Optimized distance calculations</li>
                            </ul>
                        </div>
                    </article>

                    <!-- Visualize Module -->
                    <article id="module-visualize" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.visualize</code></h3>
                            <span class="api-module-badge">Visualization</span>
                        </header>

                        <p class="api-module-description">
                            Visualization tools for rendering vascular trees and forests.
                        </p>

                        <div class="api-example">
                            <h4>Example Usage</h4>
                            <pre data-copy><code class="language-python">from svv.visualize.tree import show, points
from svv.visualize.forest import show as show_forest

# Visualize a single tree
show(tree,
     color_by='radius',
     show_points=True,
     backend='matplotlib')

# Export point cloud
points.export_points(tree, 'tree_points.vtk')

# Visualize entire forest
show_forest(forest,
           highlight_connections=True,
           save_to='forest_viz.png')</code></pre>
                        </div>
                    </article>
                </main>

                <!-- Right Sidebar - On This Page -->
                <aside class="api-toc-sidebar">
                    <div class="sidebar-section">
                        <h4 class="sidebar-title">On This Page</h4>
                        <nav id="local-toc" class="api-local-toc">
                            <!-- Auto-populated by JavaScript -->
                        </nav>
                    </div>
                </aside>
            </div>
        </section>

        <!-- Examples Section -->
        <section id="examples" class="api-section">
            <h2>Common Examples</h2>

            <div class="api-example-grid">
                <div class="api-example-card">
                    <h3>Generate a Vascular Tree</h3>
                    <pre data-copy><code class="language-python">from svv.tree import Tree
from svv.domain import Domain

domain = Domain(size=(10, 10, 10))
tree = Tree(domain, n_terminals=100)
tree.generate(method='CCO')
tree.export('vascular_tree.vtk')</code></pre>
                </div>

                <div class="api-example-card">
                    <h3>Run 0D Simulation</h3>
                    <pre data-copy><code class="language-python">from svv.simulation.fluid.rom.zero_d import zerod_tree

model = zerod_tree(tree)
model.set_cardiac_output(5.0)  # L/min
results = model.solve()
model.plot_results()</code></pre>
                </div>
            </div>
        </section>

        <!-- API Conventions -->
        <section class="api-section">
            <h2>API Conventions</h2>

            <div class="api-conventions-grid">
                <div class="convention-block">
                    <h3>Naming Conventions</h3>
                    <ul>
                        <li><strong>Classes:</strong> PascalCase (e.g., <code>TreeManager</code>)</li>
                        <li><strong>Functions:</strong> snake_case (e.g., <code>export_solid()</code>)</li>
                        <li><strong>Constants:</strong> UPPER_CASE (e.g., <code>DEFAULT_VISCOSITY</code>)</li>
                        <li><strong>Private:</strong> Leading underscore (e.g., <code>_internal_method()</code>)</li>
                    </ul>
                </div>

                <div class="convention-block">
                    <h3>Units</h3>
                    <ul>
                        <li><strong>Length:</strong> millimeters (mm)</li>
                        <li><strong>Time:</strong> seconds (s)</li>
                        <li><strong>Pressure:</strong> mmHg or Pa</li>
                        <li><strong>Flow:</strong> mL/s</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 SimVascular, Stanford University, The Regents of the University of California, and others –
            <a href="https://opensource.org/license/BSD-3-Clause">BSD 3-Clause License</a><br></p>
        </div>
    </footer>

    <!-- Load Scripts -->
    <script defer src="../script.js"></script>
    <script defer src="script_api.js"></script>
</body>
</html>